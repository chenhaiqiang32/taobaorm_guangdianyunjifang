(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=r(o);fetch(o.href,t)}})();const f="modulepreload",h=function(e,s){return new URL(e,s).href},u={},p=function(s,r,i){if(!r||r.length===0)return s();const o=document.getElementsByTagName("link");return Promise.all(r.map(t=>{if(t=h(t,i),t in u)return;u[t]=!0;const n=t.endsWith(".css"),m=n?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const d=o[c];if(d.href===t&&(!n||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${m}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":f,n||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),n)return new Promise((c,d)=>{a.addEventListener("load",c),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>s()).catch(t=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=t,window.dispatchEvent(n),!n.defaultPrevented)throw t})},L=()=>{window.parent.postMessage({cmd:"onLoading"},"*")},g=()=>{window.parent.postMessage({cmd:"onLoaded"},"*")},v=e=>{window.parent.postMessage({cmd:"inspectionId",param:e},"*")},D=e=>{window.parent.postMessage({cmd:"personDetail",param:e},"*")},E=()=>{window.parent.postMessage({cmd:"closeDomDialog"},"*")},M=e=>{window.parent.postMessage({cmd:"gatherCallBack",param:e},"*")},O=e=>{window.parent.postMessage({cmd:"web3dChangeIndoor",param:e},"*")},B=e=>{window.parent.postMessage({cmd:"buildingDetail",param:{id:e}},"*")},I=e=>{window.parent.postMessage({cmd:"dbClickBuilding",param:e},"*")},P=e=>{window.parent.postMessage({cmd:"cameraVideoId",param:e},"*")},C=e=>{window.parent.postMessage({cmd:"switchByBuildingId",param:e},"*")},_=e=>{window.parent.postMessage({cmd:"clickUnion",param:e},"*")};class l{constructor(){if(l.instance)return l.instance;l.instance=this,this.core=null,this.initialized=!1}async init(s){if(this.initialized){console.log("Store3D 已经初始化");return}try{console.log("开始初始化 Store3D...");const{Store3D:r}=await p(()=>import("./index-8f291689.js"),["./index-8f291689.js","./weather-b9fe1d86.js","./dataProgress-b96c3a73.js"],import.meta.url);this.core=new r(s),await this.core.init(),window.Core=this.core,this.initialized=!0;const{onMessage:i}=await p(()=>import("./onMessage-52881d8f.js"),["./onMessage-52881d8f.js","./weather-b9fe1d86.js"],import.meta.url);await i(),console.log("Store3D 初始化完成")}catch(r){throw console.error("初始化 Store3D 失败:",r),this.core=null,this.initialized=!1,r}}get instance(){return!this.initialized||!this.core?(console.warn("Store3D 实例尚未初始化"),null):this.core}}const w=new l;document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("canvas");if(!e){console.error("找不到 canvas 元素");return}w.init(e).catch(s=>{console.error("初始化失败:",s)}).then(()=>{g()})});export{p as _,v as a,D as b,E as c,g as d,L as e,I as f,P as g,B as h,C as i,O as j,_ as k,M as p,w as s};
